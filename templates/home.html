{% load static %}

<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Scottish Distilleries</title>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://d3js.org/d3-array.v1.min.js"></script>
  <script src="https://d3js.org/d3-geo.v1.min.js"></script>
  <script src="https://d3js.org/d3-drag.v1.min.js"></script>
  <script src="https://d3js.org/d3-zoom.v1.min.js"></script>
  <script src="https://d3js.org/topojson.v1.min.js"></script>

  <link rel="stylesheet" type="text/css" href="{% static "css/scotland.css" %}">

</head>

<body>
  <p id="mouse-coordinates" class="debug">x: -- y: --</p>

  <div id="map-container">
    <div id="map-cover"></div>
    <svg id="map-svg"></svg>
  </div>

  <script>
  var distilleries = [];
  var mapFile = "{% static 'json/topo-scotland.json' %}";

  {% for distillery in distilleries %}
  distilleries.push({
    name: '{{ distillery.name }}',
    coordinates: [parseFloat('{{ distillery.longitude }}'), parseFloat('{{ distillery.latitude }}')],
    region: '{{ distillery.region|default:"Other" }}',
    year_established: '{{ distillery.year_established|default:"Unknown" }}',
  });
  {% endfor %}
  </script>

  <script src="{% static "js/scotland.js" %}"></script>
</body>

</html>